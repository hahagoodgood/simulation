# Smart Fab 시뮬레이션 최적화

반도체 파운드리 제조 공정의 생산성을 극대화하기 위한 시뮬레이션 최적화 연구

## 프로젝트 정보

**대회**: 2024학년도 한국 대학생 컴퓨터 시뮬레이션 경진대회  
**팀명**: 모죽  
**소속**: 인하공업전문대학 컴퓨터정보공학과  
**지도교수**: 조규철  
**기간**: 2024년 8월

### 팀원

| 이름 | 학번 |
|------|------|
| 김동혁 | 202044005 
| 안승현 | 201844017 
| 김민호 | 202244016 

## 목차

- [연구 배경](#연구-배경)
- [연구 목표](#연구-목표)
- [시뮬레이션 환경](#시뮬레이션-환경)
- [문제 분석 (AS-IS)](#문제-분석-as-is)
- [해결 방안 (TO-BE)](#해결-방안-to-be)
- [실험 및 결과](#실험-및-결과)
- [결론](#결론)
- [기술 스택](#기술-스택)

## 연구 목표

파운드리 반도체 제조 공정에서 다음 세 가지 핵심 요소를 최적화하여 생산성을 극대화합니다.

1. **공정 설비 배치 최적화**: 동선을 최소화하는 레이아웃 설계
2. **AGV 운송 시스템 최적화**: 적정 AGV 대수 및 경로 설계
3. **FOUP 수량 최적화**: 교착 상태를 방지하면서 최대 생산성 달성

## 시뮬레이션 환경

### 제품 사양

본 시뮬레이션은 두 종류의 제품(A형, B형)을 1:1 비율로 생산하는 환경을 모델링합니다.

- 제품 종류: A형, B형 (1:1 비율)
- 공정 순서: 산화 → 노광 → 식각 → 증착 → 계측(50% 확률)
- 공정 반복: 각 공정 2회 반복
- 시뮬레이션 시간: 5시간 (300분)

### 설비 구성

| 공정 | 설비 수 | 특징 |
|------|---------|------|
| 산화 | 4대 | 공정 시간: 5분 (B형 기준) |
| 노광 | 13대 | 최대 비중 공정 (40분) |
| 식각 | 7대 | 공정 시간: 25분 |
| 증착 | 8대 | 공정 시간: 25분 |
| 계측 | 2대 | 50% 확률 진행 (5분) |
| Stocker | 2대 | 각 20개 FOUP 수용 |

**총 설비**: 34대 + Stocker 2대

### 팹 레이아웃

![기본 팹 레이아웃](https://github.com/user-attachments/assets/972d03a2-abbf-4f40-81cb-e4c2ecc5c456)

- 중앙 통로: 5m
- 외각 통로: 2m
- 총 면적: 약 90m × 30m

## 문제 분석 (AS-IS)

### 1. 운송 수단 선정 문제

초기 분석에서 AMR과 AGV 두 가지 운송 수단을 비교하였습니다.

**AMR (Autonomous Mobile Robot)**

![AMR 병목 현상](https://github.com/user-attachments/assets/c2afd2c6-659e-4712-b18f-141d60a292b4)

- 장점: 경로 자유롭게 설정 가능
- 단점: 좁은 통로(중앙 5m, 외각 2m)에서 병목 현상 발생
- 문제: 경로 통제 및 교통 관리 어려움

**AGV (Automated Guided Vehicle) - 채택**

- 장점: 정해진 경로로만 이동하여 통제 용이
- 장점: 방향 및 통행 가능 대수 제한 가능
- 단점: 교착 상태 발생 가능성

**선택 근거**: AGV가 병목 현상 관리 및 경로 통제에 유리하다고 판단

### 2. 설비 비율 문제

36개로 제한된 설비를 공정 시간에 비례하여 분배해야 합니다.

**B형 제품 공정 시간 분석**

| 공정 | 시간(분) | 비율 | 이상적 설비 수 |
|------|----------|------|----------------|
| 산화 | 5 | 3.3% | 1.2대 |
| 노광 | 40 | 26.7% | 9.6대 |
| 식각 | 25 | 16.7% | 6.0대 |
| 증착 | 25 | 16.7% | 6.0대 |
| 계측(50%) | 5 | 3.3% | 1.2대 |

**문제점**: 노광 공정 시간이 산화 공정의 8배이지만, 설비 수는 3배 정도만 많음 → Stocker 필요

### 3. 교착 상태 문제

공정이 2회 반복되고 각 설비가 1개의 FOUP만 처리 가능하여 환형 대기(Circular Wait) 발생 위험이 높습니다.

- 모든 설비가 FOUP를 점유하면 이동 불가
- 공정 진행 멈춤
- 생산성 급격히 저하

## 해결 방안 (TO-BE)

### 1. AGV 시스템 설계

**AGV 사양**

| 항목 | 값 |
|------|-----|
| 길이 | 1m |
| 높이 | 1m |
| 장애물 감지 거리 | 1m |
| 속도 | 60m/s (시뮬레이션 가속) |
| 최소 간격 | 1m |

**경로 설계**

![AGV 경로 설계](https://github.com/user-attachments/assets/169ebe8b-cf69-4075-9124-c47e70dd1478)

- 단방향 통행로 설계
- 4개 AGV Station 분산 배치
- 교착 상태 방지를 위한 구간별 최대 AGV 수 제한: 3대

![AGV 교착 상태 예시](https://github.com/user-attachments/assets/a9b58dbd-8492-4e35-a5ce-a82561de94ac)


### 2. 설비 배치 최적화

4가지 레이아웃을 설계하고 비교 실험하였습니다.

#### Layout 1: 공정 순서별 배치

공정 순서대로 설비를 나열한 기본 레이아웃

![공정 순서별 배치](https://github.com/user-attachments/assets/9b329995-4d53-4b16-874d-e6decc14873b)

- 특징: 직관적이나 동선 낭비 발생
- 생산량: 817개 (AGV 2대 기준)

#### Layout 2: 1:1 비율 배치

공정별 설비를 균등하게 분산 배치

![1:1 비율 배치](https://github.com/user-attachments/assets/d9e21d43-d4e6-4e31-bcd3-42ab20a4230a)

- 특징: 공정 간 균형 고려
- 생산량: 866개 (AGV 2대 기준)

#### Layout 3: B형 공정 비율 고려

B형 제품의 공정 시간 비율을 반영한 배치

![B형 비율 배치](https://github.com/user-attachments/assets/005a1f7f-03e6-4083-94f8-b6fbd047444b)


- 특징: 공정 시간 비율 중점
- 생산량: 563개 (AGV 2대 기준)

#### Layout 4: 동선 최적화 배치 (최적안)

노광 설비를 중앙에 배치하고 주변에 다른 공정 배치

![동선 최적화 배치](https://github.com/user-attachments/assets/6ba72b23-3106-4d3e-93c8-0d78934a1a03)


- 특징: 노광(최대 비중 공정)을 중심으로 동선 최소화
- 설계 원칙:
  - 노광 설비 중앙 배치 (13대)
  - 산화 및 증착 설비 양옆 배치
  - 식각 설비 노광 인근 배치
  - Stocker 2대를 대각선 양 끝에 배치
- 생산량: 986개 (AGV 2대 기준)
- 개선율: 공정 순서 배치 대비 **20.6% 향상**

### 3. FOUP 수량 최적화

**최대 수용 가능 FOUP 계산**

```
설비 34대 + Stocker 40개 - 계측 설비 2대 = 72개
```

**교착 상태 회피 전략**

- 최대 용량 이하로 운영
- Stocker를 완충 공간으로 활용
- 동적 FOUP 투입 제어

### 4. TO-BE 프로세스 흐름

```
시작
  ↓
1. 제품 유형 결정 (A/B, 50% 확률)
  ↓
2. 안정 상태 확인 (공정 중인 FOUP 수 < 72)
  ↓
3. 산화 공정 (2회 반복 시작)
  ├─ 유휴 설비 있음 → 공정 진행
  └─ 유휴 설비 없음 → Stocker 대기
  ↓
4. 노광 공정
  ├─ 유휴 설비 있음 → 공정 진행
  └─ 유휴 설비 없음 → Stocker 대기
  ↓
5. 식각 공정
  ↓
6. 증착 공정
  ↓
7. 계측 공정 (50% 확률)
  ↓
8. 2번째 공정 완료 확인
  ├─ 1회 완료 → 3번으로 반복
  └─ 2회 완료 → 종료
```

## 실험 및 결과

### 실험 1: 레이아웃별 AGV 개수에 따른 생산량 분석

**실험 조건**: FOUP 73개 고정

| AGV 개수 | 공정 순서 | 1:1 비율 | B비율 | 동선 최적화 |
|----------|-----------|----------|-------|-------------|
| 1대 | - | - | - | 605 |
| 2대 | 817 | 866 | 563 | **986** |
| 3대 | 835 | - | 698 | - |
| 10대 | 838 | - | - | - |
| 16대 | 824 | - | - | - |
| 28대 | 605 | - | - | - |

**주요 발견**

- 모든 레이아웃에서 **AGV 2대일 때 최대 생산량** 달성
- AGV 16대 이상일 때 유휴 AGV 1대 이상 발생 → 병목 현상
- 동선 최적화 레이아웃이 모든 AGV 개수에서 우수한 성능

### 실험 2: FOUP 개수에 따른 성능 분석

**실험 조건**: AGV 2대, 동선 최적화 레이아웃

| FOUP 개수 | 평균 유휴율(%) | 생산량 | 비고 |
|-----------|----------------|--------|------|
| 75 | 93.8 | 989 | - |
| 74 | 94.2 | 984 | - |
| 73 | 94.1 | 986 | - |
| 72 | 94.1 | 968 | - |
| 70 | 94.1 | **1005** | 최대 |
| 60 | 94.3 | 970 | - |
| 50 | 93.7 | 972 | - |
| 40 | 93.6 | 978 | - |
| 30 | 93.4 | 975 | - |
| 20 | 79.2 | 869 | 급감 |
| 10 | 25.0 | 372 | 급감 |

**주요 발견**

- 최적 FOUP 개수: **70개** (최대 용량의 약 97%)
- FOUP 68~73개 범위에서 생산량 980개 이상 유지
- FOUP 20개 이하일 때 생산량 급감
- 평균 유휴율 93~94% 유지가 이상적

### 종합 결과

**최적 조합**

- 레이아웃: 동선 최적화 배치
- AGV 개수: 2대
- FOUP 개수: 70개
- **최대 생산량: 1,005개**

**성능 개선**

| 비교 항목 | 기준 (공정 순서, AGV 2대) | 최적 (동선 최적화, AGV 2대) | 개선율 |
|-----------|---------------------------|------------------------------|--------|
| 생산량 | 817개 | 1,005개 | **23.0%** |

## 결론

### 1. 동선 최소화의 효과

설비 배치 최적화만으로도 **20.6%** 이상의 생산량 향상을 달성했습니다. 특히 가장 큰 비중을 차지하는 노광 설비를 중앙에 배치하고, 다른 공정 설비를 주변에 배치하여 이동 거리를 최소화한 것이 핵심이었습니다.

### 2. AGV 적정 대수의 중요성

AGV 개수가 많다고 생산성이 높아지는 것이 아닙니다. 본 연구에서는 **AGV 2대**가 최적임을 확인했으며, 16대 이상일 때 오히려 병목 현상이 발생하여 생산성이 저하되었습니다.

### 3. 교착 상태 회피 전략

최대 수용 가능 FOUP의 **95~90%** 수준으로 운영할 때 최대 생산성을 달성할 수 있었습니다. 이는 설비 간 원활한 이동을 보장하면서도 높은 가동률을 유지하는 균형점입니다.

### 연구의 의의

본 연구는 반도체 제조 공정에서 설비 배치, 운송 시스템, 재공품 수량 간의 상관관계를 정량적으로 규명하고, 실제 제조 환경에 적용 가능한 최적화 방안을 제시했습니다. 특히 동선 최소화를 통한 생산성 향상의 실질적 효과를 입증한 것이 주요 성과입니다.

## 기술 스택

- **시뮬레이션 툴**: AnyLogic Personal Learning Edition
- **라이브러리**: Material Handling Library
- **운송 시스템**: AGV (Automated Guided Vehicle)
- **분석 방법**: 비교 실험, 민감도 분석

## 참고 자료

본 프로젝트는 2024학년도 한국 대학생 컴퓨터 시뮬레이션 경진대회 결과 보고서를 기반으로 작성되었습니다.

## 라이선스

이 프로젝트는 MIT 라이선스 하에 공개되었습니다.

---

**연락처**

인하공업전문대학 컴퓨터정보공학과  
지도교수: 조규철

**팀원**
- 김동혁
- 안승현 
- 김민호 